#!/bin/bash

# Start in docker/ always
if [[ $(basename `pwd`) != docker ]]
then
    cd docker/
fi

read -p "Build GPU-enabled image? [Y/n] " gpu

if [ ! -f jupyter_notebook_config.json ]
then
    python create_jupyter_password.py
fi

if [[ $gpu =~ ^[Yy]$ ]]
then
    compute_device=gpu
else
    compute_device=cpu
fi

docker build  -t gym-$compute_device --build-arg baseimage=ntaylor22/tensorflow-$compute_device .
