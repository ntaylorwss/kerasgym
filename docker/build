#!/bin/bash

# Start in root always
if [ ! -f .isroot ]
then
    echo "Must be run from root of project."; exit
fi
cd docker/

read -p "Build GPU-enabled image? [Y/n] " gpu

if [[ $gpu =~ ^[Yy]$ ]]
then
    compute_device=gpu
else
    compute_device=cpu
fi

docker build  -t gym-$compute_device --build-arg baseimage=ntaylor22/tensorflow-$compute_device .

if [ ! -f jupyter_notebook_config.json ]
then
    python create_jupyter_password.py
fi
