#!/bin/bash

# Start in root always
if [ ! -f .isroot ]
then
    echo "Must be run from root of project."; exit
fi
cd docker/

read -p "Build GPU-enabled image? [Y/n] " gpu

if [[ $gpu =~ ^[Yy]$ ]]
then
    compute_device=gpu
else
    compute_device=cpu
fi

version=$(<../VERSION)

docker build  -t ntaylor22/pavlov-$compute_device:$version --build-arg baseimage=ntaylor22/tensorflow-$compute_device .
